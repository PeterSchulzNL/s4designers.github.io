<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <title>Page Title</title>
  <link rel="stylesheet" href="../css/main.css"/>
</head>
<body class="line-numbers">
  <aside id="toc-column"></aside>
  <aside id="agenda">
    <h1>time table</h1>
    <div include="../agenda.html"></div>
  </aside>
  <div id="page">
    <main>

  <h1>Chapter 12: build your own toolkit: reusable functions</h1>

<todo> let ipv var </todo>



  <section class="assignment">
    <h3 class="assignment questions">8.5:</h3>  
     <script type="text/plain" class="language-arduino">
    #include "s4d_breadboard.h"
    
    void setup() {
      initializeBreadboard();
    }
    
    void turnLEDsOn() {
      analogWrite(LED_BLUE, 255);
      analogWrite(LED_RED, 255);
      analogWrite(LED_GREEN, 255);
    }
    
    void turnLEDsOff() {
      analogWrite(LED_RED, 0);
      analogWrite(LED_GREEN, 0);
      analogWrite(LED_BLUE, 0);
    }
    
    // duration of pulses is dependend on the position of the potentiometer.
    // minimum duration is 50ms.
    int shortOnDuration() {
      return analogRead(POTENTIOMETER) + 50;
    }
    
    // duration of the pause between two pulses is halve the duration of the short pulse.
    int shortOffDuration() {
      return shortOnDuration() / 2;
    }
    
    // longOnDuration is three times the shortOnDuration
    int longOnDuration() {
      return 3 * shortOnDuration();
    }
    
    // longOffDuration is halve the longOnDuration
    int longOffDuration() {
      return longOnDuration() / 2;
    }
    
    void loop() {
      int pauseDuration = 2000;
    
      turnLEDsOn();
      delay( shortOnDuration() );
      turnLEDsOff();
      delay( shortOffDuration() );
    
      turnLEDsOn();
      delay( shortOnDuration() );
      turnLEDsOff();
      delay( shortOffDuration() );
    
      turnLEDsOn();
      delay( shortOnDuration() );
      turnLEDsOff();
      delay( shortOffDuration() );
    //------------------------------
      turnLEDsOn();
      delay( longOnDuration() );
      turnLEDsOff();
      delay( longOffDuration() );
    
      turnLEDsOn();
      delay( longOnDuration() );
      turnLEDsOff();
      delay( longOffDuration() );
    
      turnLEDsOn();
      delay( longOnDuration() );
      turnLEDsOff();
      delay( longOffDuration() );
    //------------------------------
      turnLEDsOn();
      delay( shortOnDuration() );
      turnLEDsOff();
      delay( shortOffDuration() );
    
      turnLEDsOn();
      delay( shortOnDuration() );
      turnLEDsOff();
      delay( shortOffDuration() );
    
      turnLEDsOn();
      delay( shortOnDuration() );
      turnLEDsOff();
      delay( shortOffDuration() );
    //------------------------------
      delay( pauseDuration );
    }
    </script>
    
    <ol type="a">
      <li>What sort of function is longOnDuration()? Does it have a return value, or a side-effect?</li>
      <li>What is the return type of longOnDuration()?</li>
      <li>What is the value coming from longOnDuration() being used for?</li>
      <li>What is the value coming from longOnDuration() dependent on? </li>
    </ol>
    <answer buttontext="Mail the answers"></answer>
    </section>
      
    <section class="assignment">
    <h3 class="assignment questions">8.6:</h3>  
    <p>The pause between signals is now dependant on a set value. (see lines 41 and 88)</p>
    <p>Make a function called pause() which returns a a value that is the sum of the shortOnDuration() and the longOnDuration() </p>
    <answer buttontext="Mail the code"></answer>
    </section>
    
    <section class="assignment">
    <h3 class="assignment questions">8.7:</h3>  
    <p>The script contains unnecessary duplicate code. Change the loop to the following and add the corresponding functions. The result should function the same way the old script did.</p>
     <script type="text/plain" class="language-arduino">
    void loop() {
       threeShortPulses();
       threeLongPulses();
       threeShortPulses();
       delay( pause() );
    }
      </script>
    <answer buttontext="Mail the code"></answer>
    </section>
    
    <section class="assignment">
    <h3 class="assignment questions">8.8:</h3>  
    <p>The time the LED is off after a pulse, is always half the duration of the pulse. The shortOffDuration() and the longOffDuration() functions are very similar in nature. Make a new function called "offDuration" which takes the duration of the pulse as a parameter, and returns that value divided by two. </p>
     <script type="text/plain" class="language-arduino">
    
       offDuration(300); // output: 150
       offDuration(shortOnDuration()); // output: half the duration of the short pulse
       offDuration(longOnDuration()); // output: half the duration of the long pulse
    
      </script>
      <p>Throw away the two unnecessary functions and replace the calls to them to calls to your new function. The result should function as follows:</p>
    <answer buttontext="Mail the code"></answer>
    </section>
    
    <section class="assignment">
    <h3 class="assignment questions">8.9:</h3>  
    <p>Make a new function called threePulses() to replace the threeShortPulses() and the threeLongPulses() functions. This new function should take the pulse duration as a parameter and output three pulses of its length. When you are done, your loop looks like this: </p>
     <script type="text/plain" class="language-arduino">
    
       void loop() {
        threePulses( shortOnDuration() );
        threePulses( longOnDuration() );
        threePulses( shortOnDuration() );
        delay( pause() );
    }
    
      </script>
     
    <answer buttontext="Mail the code"></answer>
    </section>

    </main>
  </div>
<script src='../js/main.js'></script>
</body>
</html>