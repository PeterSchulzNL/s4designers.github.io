<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <title>Page Title</title>
  <link rel="stylesheet" href="../css/main.css"/>
  <link rel="icon" href="/images/favicon-32x32.png" sizes="32x32" />
</head>
<body class="line-numbers">
  <aside id="toc-column"></aside>
  <aside id="agenda" include="../agenda.html"></aside>
  <div id="page">
    <main>

  <h1>Chapter 9: more about if statements and conditions</h1>
  
  <p>Programs doing interesting things have to take many different situations and conditions into account. In all programming languages you do this by <i>combining boolean expressions</i> into more interesting ones that can make subtler choices.</p>
  
  <youtube ytid="V0vao4kxTUg"></youtube>
  <p>Sorry, the next video is about the AND operator, not the NOT :-)</p>
  <youtube ytid="z-XlPXSi5Ek"></youtube>

  <div class="theory">
    <h3>logical oparators</h3>
    <p>To check <i>combinations</i> of things that could be true or false, we use <b>AND</b> (written as <code>&&</code>), <b>OR</b> (written as <code>||</code>) and <b>NOT</b> (written as <code>!</code>). These are the three <i>logical operators</i>.</p>
    <p>You've seen operators before. <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code> and <code>%</code> are arithmetic operators: they take two numbers as input and calculate a new value. In the previous chapter we introduced relational operators: <code>&lt;</code>, <code>&lt;=</code>, <code>==</code> and their friends. They take two values, and result in true or false depending on how they compare.</p>
    <p>The logical operators take two boolean expressions (true/false) and return a new boolean value. Here are the official rules:</p>
    <h4>the AND operator:</h4>
    <table>
      <tr>
        <th>leftBoolean</th><th>rightBoolean</th><th>leftBoolean <b><code>&&</code></b> rightBoolean</th>
      </tr>
      <tr>
        <td><code>false</code></td>
        <td><code>false</code></td>
        <td><code>false</code></td>
      </tr>
      <tr>
        <td><code>false</code></td>
        <td><code>true</code></td>
        <td><code>false</code></td>
      </tr>
      <tr>
        <td><code>true</code></td>
        <td><code>false</code></td>
        <td><code>false</code></td>
      </tr>
      <tr>
        <td><code>true</code></td>
        <td><code>true</code></td>
        <td><b><code>true</code></b></td>
      </tr>
    </table>
    <p><i>The AND-operator will only return true if <b>both inputs</b> are true.</i></p>
    <h4>the OR operator:</h4>
    <table>
      <tr>
        <th>leftBoolean</th><th>rightBoolean</th><th>leftBoolean <b><code>||</code></b> rightBoolean</th>
      </tr>
      <tr>
        <td><code>false</code></td>
        <td><code>false</code></td>
        <td><code>false</code></td>
      </tr>
      <tr>
        <td><code>false</code></td>
        <td><code>true</code></td>
        <td><b><code>true</code></b></td>
      </tr>
      <tr>
        <td><code>true</code></td>
        <td><code>false</code></td>
        <td><b><code>true</code></b></td>
      </tr>
      <tr>
        <td><code>true</code></td>
        <td><code>true</code></td>
        <td><b><code>true</code></b></td>
      </tr>
    </table>
    <p><i>The OR-operator will only return true if <b>any of the inputs</b> is true.</i></p>
    <h4>the NOT operator:</h4>
    There is a third logical oparator, called NOT. You write it with an exclamation mark, and it works only for one value. Like this:
    <script type="text/plain" class="language-js">
      if( ! productInStock ) {  // Note the exlamation mark.
        orderNewProduct();
      }
    </script>
    <p>You use NOT if you can more easily write a condition that is opposite of what you need.</p>
    <table>
      <tr>
        <th>singleBoolean</th><th><b><code>!</code></b> singleBoolean</th>
      </tr>
      <tr>
        <td><code>false</code></td>
        <td><b><code>true</code></b></td>
      </tr>
      <tr>
        <td><code>true</code></td>
        <td><b><code>false</code></b></td>
      </tr>
    </table>
    <p><i>The NOT-operator takes only one input boolean, and simply returns <b>its opposite</b> boolean.</i></p>
  </div>

  <h3 class="assignment summary">9.1: summary and questions</h3>
  <section class="assignment">
    <answer  buttontext="mail your summary">9.1.a: Make a list with <i>3 to 5 bulletpoints</i> with the most important or interesting things in the video (or the theory textbox above):</answer>
  </section>
  <section class="assignment">
      <answer noslider buttontext="mail your word list">9.1.b: Which words or concepts would you like us to explain during class?</answer>
  </section>

  <h3>9.2: Robert's scheduler contraption</h3>
  <p>Here is the source code for a simple Arduino program that keeps Robert's life on track: <download href="./scheduler.zip"></download></p>
  <p>Using the program, you can turn the potentiometer to set it to some hour in the day (0h-23h). Using the two buttons, you can set the weekday (Monday, Tuesday, etc). The program uses the OLED to show this to the user. Use the second line on the OLED to tell Robert what to do at the configured day and time.</p>
  <section class="assignment">
    <h4>9.2.a: Robert's life is simple</h4>
    <p>create boolean variables that reflect the following rules:</p>
    <ul>
      <li>Robert <i>sleeps</i> between 0:00 and 7:58. Always.</li>
      <li><i>Dinnertime</i> in Robert's life is between 18:00 and 18:59. Always.</li>
      <li>Robert <i>works</i> between 8:00 and 17:59. But not in the weekend.</li>
      <li>On Mondays and Wednesdays, Robert goes to the <i>fitness club</i>. Between 19:00 and 21:59.</li>
      <li>At all other times, Robert is free to do what he wants.</li>
    </ul>
    <p>In the loop() function, create a boolean expression for each boolean variable, based on the variables <code>hour</code> and <code>dayNumber</code>, and the earlier boolean variables. Use these variables with the if-statements in the loop() function to print the correct instruction to Robert on the OLED screen.</p>
    <answer buttonText="mail your code"></answer>
  </section>  
  <section class="assignment">
    <h4>9.2.b: light up the schedule</h4>
    <p>Have these lights burn in these conditions:</p>
    <table>
      <tr>
        <td>Blue LED</td><td>When Robert should be sleeping.</td>
      </tr>
      <tr>
        <td>Green LED</td><td>When he's free.</td>
      </tr>
      <tr>
        <td>Red LED</td><td>When he's away from home: sports or work.</td>
      </tr>
      <tr>
        <td>Yellow LED</td><td>When he is eating.</td>
      </tr>
    </table>
    <br>
    <answer buttontext="mail your code"></answer>
  </section>
  <section class="assignment">
    <h4>9.2.c: lunch and breakfast</h4>
    <p>Add the following complications to Robert's life:</p>
    <ol>
      <li>On working days Robert doesn't do breakfast, but he has lunch break at work, between 13:00 and 13:59</li>
      <li>During the weekend Robert has a big family breakfast (9:00-9:59), but he skips lunch.</li>
    </ol>
    <ul>
      <li>Make sure lunch and breakfast are properly reported on the OLED screen.</li>
      <li>Make sure the LEDs keep lighting up correctly.</li>
    </ul>
    <answer buttontext="mail your code"></answer>
  </section>

  <section class="assignment">
    <h3>9.3: <span class="inline-bonus">BONUS:</span> adding keyboard control to the game</h3>
      <p>Here's the Maya code: <download href="./maya.zip"></download></p>
      <p>Add the following code to the JavaScript section:</p>
      <script type="text/plain" class="language-js">
        function handleKeyPress(eventInfo) {           
          // eventInfo contains information about what happened that 
          // caused this function to be called. 
          // For keyboard events, it contains info about the key that
          // was pressed.
          console.log("Key press:", eventInfo.key, "with Shift:", eventInfo.shiftKey)  // eventInfo.key contains string values.
        }
        document.onkeydown = handleKeyPress  // when the user presses a key, call 'handleKeyPress'        
      </script>
      
      <p>The code adds a function that listens to the keyboard, and prints, to the console the key the user is pressing. For keys that don't represent a normal character or symbol, we get a short description as a string.</p>
      <p>Can you change the given function so that we can move Maya with the arrow keys?</p>
      <p>Can you change make it so that when the user holds the Shift-key, Maya walks faster (2 stepsizes), and slower (1 stepsize) when the user does not hold the Shift-key?</p>
      <p><span class="inline-note">TIP:</span>The browser will scroll the page (if it can) when you press the up or down buttons. Use the folowing line to prevent that:</p>
      <script type="text/plain" class="language-js">
        eventInfo.preventDefault();
      </script>
      <p>This line should only run for the arrow keys, not for the others!</p>
  </section>

  <h2>return of the Mexican</h2>

  <div class="hint-content">
    The following hint gives you the ending point of the previous code. It's usually better to use your own code, with the names that make sense to you. If for some reason you don't want to, you can use the hint below.
    <hint id="hintB" steps=2>
             <script type="text/plain" class="language-markup">
<!DOCTYPE html>
<html>
<head>
  <title>Mexican</title>
  <style type="text/css">
.button {
  font-size: 16px;
}
.score{
  font-size: 2em;
  }
  </style>

</head>
<body>
 <div style="margin: 8%;">
  	<div id="scoreToBeatDiv">Score to beat = 0</div><br>
    <div id="maxTriesDiv">maximum tries = 3</div><br>
    <div id="currentTriesDiv">current tries = 0</div><br>
    <button id="rollBothButton" class="button">Roll both</button><br>
    <button id="nextPlayerButton" class="button">Next player</button><br>
    <div id="scoreDiv" class="score">0</div> 
  </div>
<script type="text/javascript">
var scoreToBeat = 0
var maxNumberOfTries = 3
var isFirstPlayer = true
var currentTries = 0
var currentScore = 0

function calculateScore(){
  return Math.floor(Math.random() * 600) + 1 // generates a random number between 1 and 600
}

function nextPlayer(){
  if(isFirstPlayer){
    maxNumberOfTries = currentTries
    document.getElementById("maxTriesDiv").innerHTML = "maximum tries = " + maxNumberOfTries
    isFirstPlayer = false
  }
  if(currentScore > scoreToBeat){
  	scoreToBeat = currentScore
  }

  resetForNewTurn()
   
}

function rollBoth(){
  currentScore = calculateScore() 
  document.getElementById("scoreDiv").innerHTML = currentScore
  currentTries += 1;
  document.getElementById("currentTriesDiv").innerHTML = "current tries = " + currentTries
  if(currentScore <= scoreToBeat){
  	  document.getElementById("nextPlayerButton").disabled = true
  }else{
  	  document.getElementById("nextPlayerButton").disabled = false
  }
  if(currentTries >= maxNumberOfTries){
  	  document.getElementById("rollBothButton").disabled = true
  }else{
  	  document.getElementById("rollBothButton").disabled = false
  }
}

function resetForNewTurn(){
  currentTries = 0
  currentScore = 0
  document.getElementById("nextPlayerButton").disabled = false
  document.getElementById("rollBothButton").disabled = false
  document.getElementById("currentTriesDiv").innerHTML = "current tries = " + currentTries
  document.getElementById("scoreToBeatDiv").innerHTML = "Score to beat = " + scoreToBeat

  document.getElementById("scoreDiv").innerHTML = currentScore
}
document.getElementById("rollBothButton").onclick = rollBoth
document.getElementById("nextPlayerButton").onclick = nextPlayer
 
 &lt;/script>
</body>
</html>
  </script>
      
    </hint>
    
  </div>

  <section class="assignment">
    <h3 class="assignment summary">9.4: rolling single dice</h3>
    <p>In Mexican, the score is based on two dice. Let's add some code that represents those two dice.
    	<ul>
    		<li>Add two buttons to the body. One for each die. </li>
    		<li>For each button, Make a corresponding function that is called when the button is clicked. </li>
    		<li>In both functions, generate a random number between 1 and 6 to simulate a die roll. Store the value in a global variable representing the corresponding die. Later on, we'll use those values to calculate the score.</li>
    		<li>Increase the currentTries variable by one whenever a die is clicked.<br>(A player can choose to throw only one die. That counts as a complete try too).</li>
    		<li>Finally, in the function, change the innerHTML of the button that was clicked to the generated number.</li>
      </ul>
      <p>You can keep the "Roll Both" button; we'll deal with that one in the next exercise. You don't have to change its behaviour in this exercise.</p>
      <hint id="hintA">
        The following hint will tell you how to generate a number between 1 and 10.
        <hint id="hintB" steps=2>
          <script type="text/plain" class="language-javascript">
            // will generate a number between 1 and 10 (including 10)
            Math.floor(Math.random() * 10) + 1 
       </script>
        </hint>
      </hint>
    
    <answer buttontext="mail your code"></answer>
  </section>

    <section class="assignment">
    <h3 class="assignment summary">9.5: Mexican double roll</h3>
    <ul>
    	<li>Change the rollBoth() function to generate two random numbers between 1 an 6 that are then stored in the global variables you created in 9.4. </li>
      <li>Update the (single) die buttons to represent the numbers that were rolled.</li>
    	<li>Before the first try each turn, the seperate die buttons should be disabled so a player can only roll both dice at once. After the first try, the other tries can be done with either one, or two dice.</li>
    </ul>
    <answer buttontext="Mail your code"></answer>
  </section>
    <section class="assignment">
    <h3 class="assignment summary">9.6: Mexican scoring</h3>
    <p>The calculateScore() function is not what it should be. Change it to accommodate these rules:</p>
    <ul>
      <li>When both dice get the same value in the same roll (for example a 6 and a 6, or a 5 and a 5), the score should be that number times 100.</li>
      <li>When both dice rolls are different, but not 1 and 2, the score should be: <b>the-highest-die-value * 10 + the-lowest-die-value</b> (For example, a 3 and a 5 becomes 53. a 3 and a 2 becomes 32).</li>
      <li>The function should return the score. Use the variables you created. </li>
    </ul> 
    <answer buttontext="Mail your code"></answer>
  </section>

    <section class="assignment">
    <h3 class="assignment summary">9.7: Mexican scumbag</h3>
    <p>Some edge cases in the rules should now be added to the script:</p>
    <ul>
        <li>If a user throws 31 (Scumbag), an alert should warn the user he has to take a drink. The user must rethrow both dices, it does not count as a try. </li>
        <li>If a user scores 21 (Mexican), the stakes (the number of shots) are increased by one. A player throwing a mexican never loses, he can always pass the turn to the next player, even if the previous player threw mexican as well. </li>
        <ul>
        	<li>Add a variable that represents the number of shots.</li>
        	<li>Add a div that shows the number of shots.</li>
        	<li>Make sure the next Player button can always be clicked when a 21 is thrown.</li>
        	<li>Add the logic where you see fit.</li>
        </ul>
    </ul> 
    <answer buttontext="Mail your code"></answer>
  </section>
  
  
  <section class="assignment">
    <h3 class="assignment summary">9.8: Mexican double code</h3>
    <p>The amount of code used in this game can be greatly reduced by introducing some parameters or creating functions that group common functionality. In this example, the first approach (using parameters) is a bit tricky but introducing an extra function that eliminates double code can work wonders for the readability.</p>
    <p>In your code, commands that update the UI like <code>document.getElementById("currentTriesDiv").innerHTML =  3</code>, can probably be found all over the place. Make an "updateUI()" function where you update all the status divs (based on variable values). Call the new function whenever you need to, and remove all the other 'innerHTML'-setting code.</p>

   
    <answer buttontext="Mail your code"></answer>
  </section>
  <section class="assignment">
    <h3 class="assignment summary">9.9: <span class="inline-bonus">Bonus:</span> Mexican reset</h3>
    <p>Add a button that can be clicked after a player loses to reset the game.</p>
    <answer buttontext="Mail your code"></answer>
  </section>
  <section class="assignment">
    <h3 class="assignment summary">9.10: <span class="inline-bonus">Bonus:</span> Mexican beauty</h3>
    <p>The game is ugly. Make it beautiful.</p>
    <answer buttontext="Mail your code"></answer>
  </section>
    </main>
  </div>
<script src='../js/chapters.js'></script>
</body>
</html>