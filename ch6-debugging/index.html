<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <title>Page Title</title>
  <link rel="stylesheet" href="../css/main.css"/>
</head>
<body class="line-numbers">
 <main>

  <h1>Chapter 6: <i>debugging</i> code that doesn't work</h1>
  <p>Even very experienced programmers spend a lot of their time on trying to discover why their program isn't working yet. It is an integral part of the activity of programming. No one with any knowlegde of programming expects anyone create an error-free program from scratch, in a single attempt.</p>
  <p>So get used to the idea of <i><b>debugging</b></i>, the jargon term for eliminating mistakes from program code. The term was invented after an <a href="https://www.nationalgeographic.org/thisday/sep9/worlds-first-computer-bug/">actual insect caused a computer malfunction</a>. An essential skill required for quickly learning to program well is to <i>find bugs interesting</i>. <b>Do not experience bugs as a kind of failure</b>. Instead, be interested in the cause of the bug: you're a detective, and a bug is messing with your work; whodunnit? That way, debugging can actually become kind-of fun, and you'll learn a lot.</p>
  <p>Some Javascript programming mistakes will be pointed out to you by the browser when it reads and runs your program. For many other mistakes, you get little help from the browser, you you'll have to learn how to help yourself. This first video is about errors in Javascript. In Arduino the situation is similar, but slightly different: The Arduino compiler (i.e. the Upload button in the IDE) will work much harder trying to analyze your code and spot possible mistakes. That's the subject of the second video. Both videos are about 30 minutes long.</p>

  <h2>Errors in Javascript</h2>
  <p>feel free to take some notes :-)</p>
  <youtube ytid="-hYMmLw9_S4"></youtube>

  <h3 class="assignment summary">6.1 summary and questions</h3>
  <section class="assignment">
    <answer  buttontext="mail your summary">6.1a Make a list with <i>3 to 5 bulletpoints</i> with the most important or interesting things in the video:</answer>
  </section>
  <section class="assignment">
      <answer noslider buttontext="mail your word list">6.1b Which words or concepts would you like us to explain during class?</answer>
  </section>



<section class="assignment">
<h3 class="assignment questions">6.2 dung beatles</h3>  
<p>.</p>
      <script type="text/plain" class="language-html">
        
<html>
  <head>
  </head>
  <body>
    <div id="bugArea" >
       Bug description should come here.
    </div>
     <script>

    var dungBeatle = {name = "Dungbeatle" , type = "beatle" , color = "black" , food = "dung"}

    function description(bug){
      return "a " bug.name + " is a " +bug.type + " is " + bug.color + " and can be seen eating " + bug.food
    }

    document.getElementById("bugArea").innerHTML = description(dungBeatle)

     &lt;/script>
   
  </body>
</html> 
  </script>
  <p>Run the page. It does not print a description of a dungbeatle. </p>
  <ol type="a">
    <li>What does the console say? Does this mean anything to you? </li>
    <li>Is the code broken? (syntax problem) Or does it do something you didn't expect? (Logic problem) How do you know? </li>
    <li>Which line causes the error according to the console?</li>
    <li>What is the correct syntax for the thing being done on this line? How does this differ from the code? </li>
    <li>After you fixed the mistake, do you understand the error message given by the console? </li>
  </ol>
<answer buttontext="mail your answers"></answer>
</section>


<div class="instruction">
  <p>Here's a set of questions that can guide you when hunting bugs. It isn't complete, but it's a useful start:</p>
  <ul>
    <li>What does the console (or the red text in the Arduino IDE) say? Does this mean anything to you? </li>
    <li>Is the code broken (syntax problem)? How do you know? </li>
    <ul>
      <li>Which line causes the error according to the error message?</li>
      <li>What is the correct syntax for the thing being done on this line? How does this differ from the code? </li>
      <li>Do the closing accolades correspond with the proper opening accolades? </li>
      <li>After you fixed the mistake, do you understand the error message given by the console? </li>
    </ul>
    <li>Is the syntax correct but does the program not do what you intend it to do? How do you know? </li>
    <ul>
      <li>Up until what point does your code do what it should do? Check by creating console.log() or Serial.println() statements at various points</li>
      <li>If the code is complicated, simplify by creating extra variables or functions. Extra variables are especially useful for printing parts of a complicated expression.</li>
      <li>When using strings as ids or other markers in your code, make sure you copy-paste strings to prevent typos.</li>
      <li>Explain to a friend (or <a href="https://en.wikipedia.org/wiki/Rubber_duck_debugging">to the duck</a>&mdash;<a href="https://medium.com/@katiebrouwers/why-rubber-ducking-is-one-of-your-greatest-resources-as-a-developer-99ac0ee5b70a">really</a>) what your code is doing line-by-line. Start at the beginning. This helps you think about your code.</li>
    </ul>
    <li>Spend more than an hour on your problem? Go take a shower. Go hike in the forest. Go play air guitar for a while. Come back after an hour.</li>
  </ul>
</div


<h3 class="assignment questions">6.3 jille's bugs</h3>
  <img src="gallery-of-bugs.png" style="width: 100%;">  
  <p>Here's a buggy program that's meant to showcase a set of 6 bug pictures. It doesn't work correctly, so you will have to debug it. The user should be able to use the button on the right-hand side of the photo to cycle, as often as she likes, through all 6 pictures.</p>
  <p>The program code below that contains 4 bugs. Three of them are caused by typos, and you should be able to find an fix them in a reasonable amount of time. The fourth error is a logic error that causes several malfunctions.</p>
  <p>The CSS is rather long; sorry about that. The bugs are only in the Javascript.</p>
  <script type="text/plain" class="language-html">
    <!DOCTYPE html>
    <html lang="en">
    <head>
      <meta charset="UTF-8">
      <title>Slideshow</title>
      <style>
    
        body {
          background-color: khaki;
        }
        
        #slideShow {
          position: relative;
          width: 800px;
          margin: 100px auto;
          border: 100px solid white;
          box-shadow: 3px 3px 18px 0px rgba(0,0,0,0.42);
        }
    
        #title {
          font-family: "Avenir Next", "Avenir", sans-serif;
          font-size: 22px;
          font-weight: bold;
          color: #ccc;
          position: absolute;
          top: -60px;
          text-align: center;
          width: 100%;
          letter-spacing: 3px;
          text-transform: uppercase;
        }
    
        #mainImage {
          width: 800px;
          border: none;
        }
    
        #nextButton {
          position: absolute;
          top: 0px;
          right: 0px;
          width: 100px;
          height: 100%;
          opacity: 0.3;
          background: none;
          border: none;
          font-size: 100px;
          color: white;
        }
    
        #nextButton:hover {
          opacity: 0.9;
          background-color: rgba(255,255,255,0.3);
        }
        
      </style>
    </head>
    <body>
      <div id="slideShow">
        <div id="title">Jille's Bug Gallery</div>
        <image id="mainImage" src="bug1.jpg">
        <button id="nextButton">Â»</button>  
      </div>
      <script>
    
        var pictureNames = [ "bug1.jpg",  "bug2.jpg",  "bug3.jpg",  "bug4.jqg",  "bug5.jpg",  "bug6.jpg", ]
    
        function showPicture1() 
          document.getElementById("mainImage").src = pictureNames[1]
          document.getElementById("nextButton").onclick = showPicture2
        }
        function showPicture2() {
          document.getElementById("mainImage").src = pictureNames[2]
          document.getElementById("nextButton").onclick = showPicture3
        }
        function showPicture3() {
          document.getElementById("mainImage").src = pictureNames[3]
          document.getElementById("nextButton").onclick = showPicture4
        }
        function showPicture4() {
          document.getElementById("mainImage').src = pictureNames[4]
          document.getElementById("nextButton").onclick = showPicture5
        }
        function showPicture5() {
          document.getElementById("mainImage").src = pictureNames[5]
          document.getElementById("nextButton").onclick = showPicture6
        }
        
        function showPicture6() {
          document.getElementById("mainImage).src = pictureNames[6]
          document.getElementById("nextButton").onclick = showPicture7
        }
    
        showPicture1()
      </script>
    </body>
    </html>  </script>
    <p>Here are the images: <download href="bugPhotos.zip"></download></p>
    <p>Run the page. First, solve the syntax errors and the remaining typo.</p>
    <section class="assignment">
  <h4>6.3.a first, describe the 3 simple bugs</h4>
  <p>For each bug you find, <b><i>before you start fixing it</i></b>, give a description of the bug. How would you explain the malfunction to a classmate? Describe it in terms of what you're seeing, or how the program is behaving; keep ideas about the causes out of the description. Try to be as clear and precise as you can! When you start programming in teams (a few weeks from now), you really don't want your teammates to be vague or superficial about  problems they want you to help out on.</p>  
  <answer noslider buttontext="mail the descriptions of 3 typo-bugs you've found">Collect the descriptions in a single mail before sending the mail in.</answer>
  </section>
  <section class="assignment">
    <h4>6.3.b Fix them bugs!</h4>
    <p>Correct the typos. After that, the user should be able to see most of the photos.</p>
    <answer noslider buttontext="mail your code"></answer>
  </section>
  <section class="assignment">
    <h4>6.3.c the logic error</h4>
    <p>The logic error has more than a single consequence for the behaviour of the program. Can you describe 3 or 4 observations about what is still going wrong?</p>
    <answer noslider buttontext="mail the your observations"></answer>
  </section>
  <section class="assignment">
    <h4>6.3.d the cause of the error</h4>
    <p>Analyze the behaviour of the program. Use <code>console.log()</code> to get more information about what is going on. Can you find the thinking error that was made?</p>
    <p>You don't have to fix the problem. The important thing is to <b>discover, en describe clearly, whodunnit:</b> What casued the error?</p>
    <answer buttontext="mail your description of the thinking error"></answer>
  </section>
  <section class="assignment">
    <h4>6.3.e <span class="inline-bonus">BONUS:</span>the fix</h4>
    <p>This bonus exercise is optional: if you have little time, or other worthwhile things to do, feel free to skip it.</p>
    <p>It can be difficult to analyze a bug without immediately feeling the urge to fix it. So go ahead, if you want: fix the logic error, and send in the bug-free version of Jille's Gallery of Bugs.</p>
    <answer buttontext="mail your fixed program."></answer>
  </section>



  <h2>errors in Arduino code</h2>

  <youtube ytid="0bFNLliOyCs"></youtube>

  <h3 class="assignment summary">6.4 summary and questions</h3>
  <section class="assignment">
    <answer  buttontext="mail your summary">6.4a Make a list with <i>3 to 5 bulletpoints</i> with the most important or interesting things in the video:</answer>
  </section>
  <section class="assignment">
      <answer noslider buttontext="mail your word list">6.4b Which words or concepts would you like us to explain during class?</answer>
  </section>

  <section class="assignment">
    <h3 class="assignment summary">6.4 bugs in the music</h3>
    <p>The code from the video is too long to show on this page. Use the download button to get it: <download href="furElise.zip"></download></p>
    <p>This version contains two mistakes (depending on how you count). Make it work again.</p>
    <p><span class="inline-note">TIP:</span>One of the bugs causes error messages. Those messages have <i>nothing to do</i> with the actual mistake. They describe the compiler's confusion, but the compiler has no clue about the cause. Stiil, you can get a bit of a hint from the first message.</p>
    <answer buttontext="mail your fixed program."></answer>
  </section>
  
  <section class="assignment">
    <h3><span class="inline-bonus">BONUS:</span>improving the gallery code</h3>
    The Arduino video introduced two cool tricks:
    <ol>
      <li>using the <b>modulo operator</b> (written as %) to calculate a cycling number (i.e. 0-1-2-3-0-1-2-3-0-...) from a counter variable that increases; and</li>
      <li>using a variable to give the position of an array element, i.e. <code>noteFrequency = melodyFrequencies[ noteIndex ]</code></li>
    </ol>
    <p>These tricks work the same way in Javascript. They can be used to make a very different implementation (=solution in code) of Jille's Gallery of Bugs. Here is some example code:</p>
    <script type="text/plain" class="language-js">
    
      var pictureNames = [ "bug1.jpg",  "bug2.jpg",  "bug3.jpg",  "bug4.jpg",  "bug5.jpg",  "bug6.jpg", ]

      var pictureNumber = 0
  
      function updatePicture() {
        var pictureIndex =          // TODO 1: use modulo to calculate a number
                                    //         between 0 - 5 from pictureNumber
                                    
        document.getElementById("mainImage").src =     // TODO 2: use the pictureIndex to
                                                       //         get the correct filename 
                                                       //         from the pictureNames array. 
      }
  
      function nextPicture() {
        pictureNumber = pictureNumber + 1;
        updatePicture();
      }
  
      document.getElementById("nextButton").onclick = nextPicture
    </script>
    <p>Use the HTML file from exercise 6.3, and replace it's Javascript with the code above. Then implement both TODO-items in the code.</p>
    <p>Don't worry if you encounter any bugs. Everyone does. All the time :-)</p>
    <answer buttontext="mail your improved gallery."></answer>
  </section>

</main>  
<aside id="sidebar" include="../agenda.html" reject=".secret"></aside>
<script src='../js/chapters.js'></script>
</body>
</html>