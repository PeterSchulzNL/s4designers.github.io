<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <title>Page Title</title>
  <link rel="stylesheet" href="../css/main.css"/>
</head>
<body class="line-numbers">
 <main>

  <h1>chapter 7: how functions communicate: <i>parameters</i> and <i>return values</i></h1>

  <todo>video</todo>

  <section class="assignment">
      <h3 class="assignment questions">7.1a Explain</h3>
      <p>
       Answer the following questions in your own words:
      </p>
      <ol type="a">
        <li>What is a return value?</li>
        <li>What is a side-effect?</li>
        <li>What is a parameter?</li>
        <li>What is an argument?</li>
        <li>What is the difference between an argument and a parameter?</li>
        <li>What is the difference between a variable and a parameter?</li>
      </ol>
      <answer noslider buttontext="Mail the answers"></answer>
  </section>
  <section class="assignment">
      <h3 class="assignment questions">7.1b point</h3>
      <script type="text/plain" class="language-arduino">
#include "s4d_breadboard.h"

void setup() {
  Serial.begin(9600);
  initializeBreadboard();
}

void loop() {
  mapSensorToLed(MAGNETSENSOR, LED_GREEN);
  mapSensorToLed(2, 10);
  Serial.println(stabilizedMagnetValue());
}

void mapSensorToLed(int sensorPin, int ledPin){
  analogWrite(ledPin, analogRead(sensorPin) / 4);
}

int stabilizedMagnetValue(){
  return analogRead(MAGNETSENSOR) / 100;
}
      </script>
      <ol type="a">
        <li>Does the mapSensorToLed function have a side effect and/or a return value?</li>
        <li>Does the stabilizedMagnetValue function have a side effect and/or a return value?</li>
        <li>Name the parameters in the code</li>
        <li>Name the arguments in the code</li>
      </ol>
      <answer noslider buttontext="Mail the answers"></answer>
  </section>
   <section class="assignment">
      <h3 class="assignment questions">7.2 side effect or return</h3>
      <p>
        Below are some function calls. Based on the name of the called function, try to explain why you think the function has a side-effect or a return value.
      </p>
      <ol type="a">
        <li>add(4,3)</li>
        <li>displayStartScreen()</li>
        <li>Math.random()</li>
        <li>firstNumberFromString("ufd4dsfsal34daf")</li>
        <li>alert()</li>
        <li>Serial.println("Hello!");</li>
      </ol>
      <answer noslider buttontext="Mail the answers"></answer>
  </section>

 <section class="assignment">
      <h3 class="assignment questions">7.3a Area code</h3>
      <script type="text/plain" class="language-javascript" >
            var area = 0;

            function calculateArea(length, height) {
              area = length * height
            }

            calculateArea(12,44)
            console.log(area)
                
        </script>
        <p>Why doesn't console.log(calculateArea(12,44)) work?</p>
      <answer buttontext="Mail your answer"></answer>
  </section>

 <section class="assignment">
      <h3 class="assignment questions">7.3b Area recode</h3>
       <p>Change the area function in such a way that console.log(calculateArea(12,44)) would output 528. What would be a better name for this function?
      <answer buttontext="Mail your code"></answer>
  </section>

   <section class="assignment">
      <h3 class="assignment questions">7.3c squared</h3>
      <script type="text/plain" class="language-javascript" >
            function twelveSquared() {
              return 12 * 12
            }

            function elevenSquared() {
              return 11 * 11
            }

            function tenSquared() {
              return 10 * 10
            }

            console.log(tenSquared()) 
            console.log(elevenSquared())  
            console.log(twelveSquared()) 
                
        </script>
        <p>The given functions look a lot alike. This is usually a sign parameters can be used to make functions more generic. Make a function that can square any number.</p>
      <answer buttontext="Mail the code"></answer>
  </section>

  <section class="attention">
      <p>The following exercise is about functions with parameters, not about security. Do not use code from this assignment in commercial applications.</p>
    </section>
   <section class="assignment">
      <h3 class="assignment questions">7.4a Password manager</h3>
          <script type="text/plain" class="language-javascript">
            function createPassword(passPhrase) {
              var cryptoPhrase = "a7" + btoa(passPhrase) + "%H";
              return cryptoPhrase
            }      
        </script>
      <p>The createPassword() function above takes a weak, but memorable password and turns it into a stronger password. This is how the function works:</p>
      <ul>
        <li>The function takes the passphrase and using the <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding">btoa() function</a>, encodes it to a random looking string.</li>
        <li>the function than adds "a7" to the front of the string, and adds "%H" to the end of it to make the password confirm to most site's requrements.</li>
        <li>the function proceeds to return the string for you to use as a password.</li>
      </ul>

       <p>Use the console to call the function with your name as an argument to see how it works.</p>
      <answer buttontext="Mail the generated passphrase"></answer>
  </section>
<section class="assignment">
      <h3 class="assignment questions">7.4b Password Manager 2</h3>  
      <p>Make a page that uses this function to change simple passwords in to stronger ones.</p>
      <ul>
        <li>Make an input field where a user can enter an easy to remember passphrase</li>
        <li>Make a div that is meant to dislay the generated passphrase</li>
        <li>Make a button that triggers a function that: </li>
        <ul>
          <li>Reads the contents of the password field</li>
          <li>Calls the createPassword() function with the contents of the field as the argument</li>
          <li>Uses the output of the createPassword() function to display the generated passphrase in the div.</li>
        </ul>
      </ul>
      <answer buttontext="Mail the code"></answer>
  </section>
<section class="assignment">
      <h3 class="assignment questions">7.4c Password Manager 3</h3>  
      <p>It would be even cooler if the user could use the same simple password to generate different passwords for different services. Add a "service" parameter to the createPassword() function and use this parameter to add an extra component to our encryption. For convenience, add a dropdown with different services to the webpage. </p>
        <ul>
          <li>Use the code below to add a dropdown to your HTML.</li>
          <li>Modify the createPassword() function so it takes an additional parameter called service </li>
          <li>Append the value of the service parameter to the value that is encoded by btoa(). </li>
          <li>Don't forget to pass the selected item of the selectbox to the createPassword() function as an argument. </li>
        </ul>
 <script type="text/plain" class="language-html" >
<select id="services">
  <option value="Google">Google</option>
  <option value="Han Account" selected>Han Account</option>
  <option value="Twitter">Twitter</option>
  <option value="Bank">Bank</option>
</select>
</script>
      <answer buttontext="Mail the code"></answer>
  </section>
  <section class="assignment">
      <h3 class="assignment questions">7.4d Password Manager 4</h3>  
      <p>The function below puts the string in the parameter on the clipboard, ready to be pasted by the user. Add this functionality to your program.</p>
 <script type="text/plain" class="language-javascript">
function putOnClipboard(text) {
  navigator.clipboard.writeText(text)
}
</script>
      <answer buttontext="Mail the code"></answer>
  </section>
 <section class="assignment">
      <h3 class="assignment questions">7.4e <span class="inline-bonus">BONUS:</span> Reverse engineer</h3>  
      <p>Somebody used your script for something nefarious. The police is interested in recovering original passwords created by the script. Create a function that reverses the encryption process. You may have to use the substring function and the atob() function</p>
 <script type="text/plain" class="language-javascript">
var str = "Hello world!";
var res = str.substring(1, 4); // outputs "ell"

var encodedString = btoa("Hello World") //outputs: "SGVsbG8gV29ybGQ="
var normalString = atob(encodedString) //outputs: "Hello World!"
</script>
      <answer buttontext="Mail the code"></answer>
  </section>

  <section class="assignment">
      <h3 class="assignment questions">7.5 objects and parameters!</h3>
      
      <p>
       You can pass both objects and arrays to a function.
      </p>
    
 <script type="text/plain" class="language-javascript">
var conan = {
  name: "Conan",
  stats: {
    health: 800,
    strength: 80,
    intelligence: 30,
    personality: 50
  },
  weapon: {
    name: "Sword of endless fury",
    damage: "15",
    attack: "2d3 + 15"
  },
  class: "Warrior",
  race: "Barbarian"
}
var orc = {
  name: "Goronack",
  stats: {
    health: 50,
    strength: 8,
    intelligence: 30,
    personality: 50
  },
  weapon: {
    name: "Curiass",
    damage: "5",
    attack: "2d3 + 15"
  },
  class: "Warrior",
  race: "Orc"
}

function fight(player, enemy){
  var damage = enemy.weapon.damage * enemy.stats.strength
  return player.stats.health - damage
}

var healthLefAfterFight = fight(conan,orc)

  </script>
  <p>Notice the fight function takes two objects as a parameter. Right now it returns an integer. This is a bit illogical. It would be better if the fight() function returned a new version of the player where the health has been updated. Change the function in such a way that it returns an updated version of the player after the fight. You should be able to call the fight() function like this:</p>
 <script type="text/plain" class="language-javascript">
var conan = fight(conan,orc) 
  </script>
      <answer buttontext="Mail the code"></answer>
  </section>




</main>  
<aside id="sidebar" include="../agenda.html" reject=".secret"></aside>
<script src='../js/chapters.js'></script>
</body>
</html>